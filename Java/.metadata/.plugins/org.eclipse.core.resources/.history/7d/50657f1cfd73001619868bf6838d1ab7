import java.awt.Color;

import rennyu.RFrame;

public class Main{
	public static RFrame frame;
	public static Blopic bp;
	
	public static void led(byte count){
		byte data[]={1,0};
		byte key=1;
		if(bp.hash.containsKey(key)){
			for(byte i=0;i<bp.hash.get(key).size();i++){
				data[0]=(byte)bp.hash.get(key).get(i);
				if(count==i){
					data[1]=(byte)1;
				}
				else{
					data[1]=(byte)0;
				}
				bp.query(data);
			}
		}
	}
	
	public static void main(String[] args) {
		frame=new RFrame("Blopic",640,480,(byte) 60);
		frame.setVisible(true);

		try{
			bp=new Blopic(args[0]);
			bp.load();
			byte count=1;
			while(!frame.update()){
				frame.drawBox(0, 0, frame.getWidth(),frame.getHeight(),Color.BLACK,true);
				led((byte)(count/30));
				count++;
				if(count/30==4){
					count=1;
				}
			}
			bp.close();
			frame.setVisible(false);
			System.exit(0);
		}catch(Exception e){
			bp.close();
			frame.setVisible(false);
			System.exit(0);
			e.printStackTrace();
		}
	}
}
